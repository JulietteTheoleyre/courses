---
title: Graphics and maps with R
subtitle: some years since Hadley Wickham reign
author: Marie-Pierre Etienne
date: "2020/09/11 (updated: `r Sys.Date()`)"
institute: "https://github.com/MarieEtienne/stateoftheRinRennes/"
csl: "../resources/apa-no-doi-no-issue.csl"
output:
  beamer_presentation:
    slide_level: 2
    highlight: kate
    keep_tex: true
    includes:
      in_header: ../resources/common_preamble.tex
      before_body: ../resources/common_startup.tex
bibliography: visu.bib
fontsize: 10pt
params: 
  child_path : ""
  setup_path : "../resources/"
---

```{r setup, include = FALSE, cahe = FALSE}
source(paste0(params$setup_path, "knitr_setup.R"))
with_sol <- TRUE ## in order to control the output
with_course <- TRUE
```


```{r, load_refs, include=FALSE, cache=FALSE}
## textformating function
source('../utils/text_formatting.R')
```

#  Introduction

##  Tutorial based on 
- [ggplot2: Elegant Graphics for Data Analysis](https://ggplot2-book.org/index.html) @wickham2016ggplot2
- [Geocomputation with R](https://geocompr.robinlovelace.net/) @lovelace2019geocomputation`
- [Tutoriel de Raphaelle Momal et Marie Perrot Dockès](https://stateofther.github.io/post/fancy-plotting/)
- [Drawing beautiful maps programmatically with R](https://www.r-spatial.org/r/2018/10/25/ggplot2-sf.html)



## ggplot presentaion

gg stands for   *Grammar of Graphics*  and  ggplot2  is *based on the Grammar of Graphics @wilkinson2005grammar`, that allows you to compose graphs by combining independent components* (@wickham2016ggplot2).

*In brief, the grammar tells us that a graphic maps `r colFmt("the data", color_darj[1])` to the `r colFmt("aesthetic attributes", color_darj[2])` (colour, shape, size) of `r colFmt("geometric objects", color_darj[4])`  (points, lines, bars). The plot may also include statistical transformations of the data and information about the plot’s coordinate system. Facetting can be used to plot for different subsets of the data. The combination of these independent components are what make up a graphic.*  (@wickham2016ggplot2).


For coherence, we will make use of the `tidyverse` suite.

```{r load_tidyverse, message = FALSE}
library(tidyverse)
```



## First running example:  The Palmer Penguins dataset 

The Palmer penguins 
```{r palmer_data}
#remotes::install_github("allisonhorst/palmerpenguins")
data(penguins,package = "palmerpenguins")
penguins %>% 
  print(n=2)

```


## Brief overview of the Palmer Penguin dataset


```{r show_data_palmer, echo = FALSE}

penguins %>% 
  group_by(species, island, year) %>% 
  mutate(n = n()) %>% 
  summarise_if(is.numeric, mean, na.rm = TRUE) %>% 
  print(n=10)
```


# References
